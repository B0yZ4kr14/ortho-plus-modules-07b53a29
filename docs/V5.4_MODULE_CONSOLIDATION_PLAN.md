# Plano V5.4: CONSOLIDAÇÃO DE MÓDULOS

## Objetivo
Migrar todas as páginas de `src/pages/` para seus respectivos módulos em `src/modules/*/ui/pages/`, seguindo a arquitetura DDD modular.

## Status: FASE 1 COMPLETA ✅
Duração estimada: 3 dias (24 horas)  
**Progresso atual: 4/8 módulos simples migrados (50% da Fase 1)**

---

## Páginas a Migrar (Prioridade Alta)

### 1. Módulo AGENDA (2h)
- [x] ~~`AgendaPage.tsx`~~ → Já em `src/modules/agenda/ui/pages/AgendaPage.tsx`
- [ ] `AgendaClinica.tsx` → Migrar para `src/modules/agenda/ui/pages/AgendaClinicaPage.tsx`

### 2. Módulo PACIENTES (2h)
- [ ] `Pacientes.tsx` → `src/modules/pacientes/ui/pages/PacientesListPage.tsx`
- [ ] `PatientDetail.tsx` → `src/modules/pacientes/ui/pages/PatientDetailPage.tsx`
- [ ] `PatientDetail-v2.tsx` → Avaliar se consolidar com PatientDetail
- [ ] `PatientForm.tsx` → `src/modules/pacientes/ui/pages/PatientFormPage.tsx`

### 3. Módulo DENTISTAS (1h) ✅ CONCLUÍDO
- [x] `Dentistas.tsx` → `src/modules/dentistas/ui/pages/DentistasPage.tsx`

### 4. Módulo FUNCIONARIOS (1h) ✅ CONCLUÍDO
- [x] `Funcionarios.tsx` → `src/modules/funcionarios/ui/pages/FuncionariosPage.tsx`

### 5. Módulo PROCEDIMENTOS (1h) ✅ CONCLUÍDO
- [x] `Procedimentos.tsx` → `src/modules/procedimentos/ui/pages/ProcedimentosPage.tsx`
- [ ] `TemplatesProcedimentos.tsx` → `src/modules/procedimentos/ui/pages/TemplatesProcedimentosPage.tsx`

### 6. Módulo PEP (2h)
- [ ] `PEP.tsx` → `src/modules/pep/ui/pages/PEPPage.tsx`
- [ ] `AssinaturaICP.tsx` → `src/modules/pep/ui/pages/AssinaturaICPPage.tsx`
- [ ] `IARadiografia.tsx` → Já está em módulo IA?

### 7. Módulo ESTOQUE (3h)
- [x] ~~`EstoquePage.tsx`~~ → Já em `src/modules/estoque/ui/pages/EstoquePage.tsx`
- [ ] `estoque/EstoqueDashboard.tsx` → `src/modules/estoque/ui/pages/EstoqueDashboardPage.tsx`
- [ ] `estoque/EstoqueInventario.tsx` → `src/modules/estoque/ui/pages/EstoqueInventarioPage.tsx`
- [ ] `estoque/EstoqueInventarioDashboard.tsx` → `src/modules/estoque/ui/pages/`
- [ ] `estoque/EstoqueInventarioHistorico.tsx` → `src/modules/estoque/ui/pages/`
- [ ] `estoque/EstoqueCadastros.tsx` → `src/modules/estoque/ui/pages/`
- [ ] `estoque/EstoqueAnaliseConsumo.tsx` → `src/modules/estoque/ui/pages/`
- [ ] `estoque/EstoqueAnalisePedidos.tsx` → `src/modules/estoque/ui/pages/`
- [ ] `estoque/EstoqueIntegracoes.tsx` → `src/modules/estoque/ui/pages/`
- [ ] `estoque/ScannerMobile.tsx` → `src/modules/estoque/ui/pages/`

### 8. Módulo PDV (2h)
- [x] ~~`PDVPage.tsx`~~ → Já em `src/modules/pdv/ui/pages/PDVPage.tsx`
- [ ] `pdv/RelatorioCaixa.tsx` → `src/modules/pdv/ui/pages/RelatorioCaixaPage.tsx`
- [ ] `pdv/DashboardExecutivoPDV.tsx` → Já lazy loaded
- [ ] `pdv/MetasGamificacao.tsx` → `src/modules/pdv/ui/pages/MetasGamificacaoPage.tsx`

### 9. Módulo CRM (1h)
- [ ] `crm/index.tsx` → `src/modules/crm/ui/pages/CRMPage.tsx`
- [ ] `CRMFunil.tsx` → `src/modules/crm/ui/pages/CRMFunilPage.tsx`

### 10. Módulo COBRANCA (1h)
- [ ] `Cobranca.tsx` → `src/modules/cobranca/ui/pages/CobrancaPage.tsx`

### 11. Módulo TELEODONTO (1h)
- [ ] `teleodonto/index.tsx` → `src/modules/teleodonto/ui/pages/TeleodontologiaPage.tsx`

### 12. Módulo LGPD (1h)
- [ ] `lgpd/index.tsx` → `src/modules/lgpd/ui/pages/LGPDCompliancePage.tsx`

### 13. Módulo BI (1h)
- [ ] `bi/index.tsx` → `src/modules/bi/ui/pages/BusinessIntelligencePage.tsx`
- [ ] `bi-dashboard.tsx` → `src/modules/bi/ui/pages/BIDashboardPage.tsx`

---

## Páginas Core (Manter em src/pages/)

Estas páginas devem permanecer em `src/pages/` pois são funcionalidades transversais:

- ✅ `Auth.tsx` (Autenticação)
- ✅ `ResetPassword.tsx` (Autenticação)
- ✅ `NotFound.tsx` (Error handling)
- ✅ `Forbidden.tsx` (Error handling)
- ✅ `DashboardUnified.tsx` (Dashboard principal unificado)
- ✅ `Demo.tsx` (Demo/Onboarding)
- ✅ `HelpCenter.tsx` (Ajuda)
- ✅ `Usuarios.tsx` (Gestão de usuários - core)
- ✅ `Configuracoes.tsx` (Configurações - core)
- ✅ `Relatorios.tsx` (Relatórios gerais)
- ✅ `UserBehaviorAnalytics.tsx` (Analytics)
- ✅ `AuditLogs.tsx` (Auditoria - core)
- ✅ `AuditTrailViewer.tsx` (Auditoria - core)
- ✅ `Recall.tsx` (Funcionalidade transversal)
- ✅ `QuickChart.tsx` (Funcionalidade transversal)
- ✅ `ReportTemplates.tsx` (Templates gerais)
- ✅ `FluxoDigital.tsx` (Integração externa)

### Páginas Admin (Manter em src/pages/admin/)
- ✅ `admin/TerminalPage.tsx`
- ✅ `admin/GitHubManagerPage.tsx`
- ✅ `admin/DatabaseMaintenancePage.tsx`
- ✅ `admin/BackupsPage.tsx`
- ✅ `admin/CryptoConfigPage.tsx`
- ✅ `admin/WikiPage.tsx`
- ✅ `admin/ADRsPage.tsx`
- ✅ `admin/MonitoringPage.tsx`
- ✅ `admin/SystemLogsPage.tsx`
- ✅ `admin/ApiDocsPage.tsx`

### Páginas Settings (Manter em src/pages/settings/)
- ✅ `settings/ModulesPage.tsx`
- ✅ `settings/ModulesAdmin.tsx`
- ✅ `settings/ModulesSimple.tsx`
- ✅ `settings/ProfileSettings.tsx`
- ✅ `settings/OnboardingAnalytics.tsx`
- ✅ `settings/ScheduledBackupsManagement.tsx`
- ✅ `settings/BackupExecutivePage.tsx`

---

## Fases de Implementação

### FASE 1: Módulos Simples (6 horas) - 50% COMPLETO ✅
1. ✅ Dentistas
2. ✅ Funcionarios
3. ✅ Procedimentos
4. ✅ Cobranca
5. CRM (próximo)
6. Teleodonto (próximo)
7. LGPD (próximo)
8. BI (próximo)

### FASE 2: Módulos Médios (8 horas)
1. Agenda
2. PEP
3. PDV

### FASE 3: Módulos Complexos (10 horas)
1. Pacientes (4 páginas)
2. Estoque (10 páginas)

---

## Checklist Pós-Migração

Para cada página migrada:
- [ ] Criar estrutura de pastas no módulo (`ui/pages/`)
- [ ] Migrar componente para o módulo
- [ ] Atualizar imports em `App.tsx`
- [ ] Atualizar lazy loading se necessário
- [ ] Verificar se há componentes compartilhados que devem ir para `src/components/shared/`
- [ ] Deletar arquivo antigo de `src/pages/`
- [ ] Testar rota e funcionalidade
- [ ] Atualizar documentação

---

## Métricas de Sucesso

- ✅ 0 páginas específicas de módulos em `src/pages/` (exceto core/admin/settings)
- ✅ 100% das páginas de módulos em `src/modules/*/ui/pages/`
- ✅ Estrutura consistente em todos os módulos
- ✅ Zero imports quebrados
- ✅ Todas as rotas funcionando

---

## Próximos Passos Após V5.4

1. **V5.5**: Testes E2E expandidos (80% coverage)
2. **V5.6**: Performance Optimization
3. **V5.7**: Validação Final
